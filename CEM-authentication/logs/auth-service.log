2025-06-25 01:09:18 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 33256 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 01:09:18 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 01:09:18 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 01:09:18 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-25 01:09:18 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-25 01:09:19 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 01:09:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 01:09:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 2 JPA repository interfaces.
2025-06-25 01:09:21 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 01:09:21 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 01:09:21 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 01:09:21 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 01:09:21 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3261 ms
2025-06-25 01:09:22 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 01:09:22 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-25 01:09:22 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 01:09:22 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 01:09:23 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 01:09:24 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@7ff79180
2025-06-25 01:09:24 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 01:09:24 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 01:09:24 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 01:09:25 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 01:09:26 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-06-25 01:09:26 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists FKp56c1712k691lhsyewcssf40f
2025-06-25 01:09:26 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-06-25 01:09:26 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-06-25 01:09:26 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        name varchar(50) not null unique,
        description varchar(255),
        primary key (id)
    )
2025-06-25 01:09:26 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        email_verified boolean,
        login_attempts integer,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login_at timestamp(6),
        locked_until timestamp(6),
        password_reset_expires_at timestamp(6),
        role_id bigint not null,
        updated_at timestamp(6),
        phone varchar(15),
        first_name varchar(100) not null,
        last_name varchar(100) not null,
        created_by varchar(255),
        email varchar(255) not null unique,
        email_verification_token varchar(255),
        password varchar(255) not null,
        password_reset_token varchar(255),
        status varchar(255) not null check (status in ('ACTIVE','INACTIVE','SUSPENDED','PENDING_VERIFICATION','DELETED')),
        primary key (id)
    )
2025-06-25 01:09:26 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint FKp56c1712k691lhsyewcssf40f 
       foreign key (role_id) 
       references roles
2025-06-25 01:09:26 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 01:09:26 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-25 01:09:27 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 01:09:28 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 01:09:28 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 01:09:29 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 01:09:29 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 01:09:30 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 01:09:30 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 01:09:30 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 13.167 seconds (process running for 13.811)
2025-06-25 01:09:30 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles
2025-06-25 01:09:31 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:09:31 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:09:31 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default ADMINISTRATOR role
2025-06-25 01:09:31 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:09:31 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:09:31 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default STAFF role
2025-06-25 01:09:31 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:09:31 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:09:31 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default MANAGER role
2025-06-25 01:09:31 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:09:31 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:09:31 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default CUSTOMER role
2025-06-25 01:09:31 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:09:31 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:09:31 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default SUPPORT_TEAM role
2025-06-25 01:09:31 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default administrator account
2025-06-25 01:09:31 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-06-25 01:09:31 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 01:09:32 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.User */insert 
    into
        users (created_at, created_by, email, email_verification_token, email_verified, first_name, last_login_at, last_name, locked_until, login_attempts, password, password_reset_expires_at, password_reset_token, phone, role_id, status, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-25 01:09:32 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default administrator account created successfully: admin@cem.com
2025-06-25 01:09:57 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-25 01:09:57 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-25 01:09:57 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-25 01:09:57 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui.html
2025-06-25 01:09:57 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:09:57 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui.html
2025-06-25 01:09:57 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-06-25 01:09:57 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:09:57 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-06-25 01:09:57 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2025-06-25 01:09:57 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:09:57 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2025-06-25 01:09:57 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2025-06-25 01:09:57 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2025-06-25 01:09:57 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:09:57 [http-nio-8081-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:09:57 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2025-06-25 01:09:57 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2025-06-25 01:09:57 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2025-06-25 01:09:57 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:09:57 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2025-06-25 01:09:57 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2025-06-25 01:09:57 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:09:57 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2025-06-25 01:09:57 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api-docs/swagger-config
2025-06-25 01:09:57 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:09:57 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api-docs/swagger-config
2025-06-25 01:09:57 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/favicon-32x32.png
2025-06-25 01:09:57 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:09:57 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/favicon-32x32.png
2025-06-25 01:09:57 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-06-25 01:09:57 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:09:57 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-06-25 01:09:58 [http-nio-8081-exec-9] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 978 ms
2025-06-25 01:15:40 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 01:15:41 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 01:15:41 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 01:15:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-06-25 01:15:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists FKp56c1712k691lhsyewcssf40f
2025-06-25 01:15:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-06-25 01:15:41 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-06-25 01:15:41 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 01:15:42 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 01:15:58 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 23816 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 01:15:58 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 01:15:58 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 01:15:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-25 01:15:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-25 01:16:00 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 01:16:00 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 01:16:00 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 65 ms. Found 2 JPA repository interfaces.
2025-06-25 01:16:02 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 01:16:02 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 01:16:02 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 01:16:02 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 01:16:02 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3755 ms
2025-06-25 01:16:02 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 01:16:02 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-25 01:16:02 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 01:16:03 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 01:16:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 01:16:04 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@47cf74c9
2025-06-25 01:16:04 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 01:16:04 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 01:16:04 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 01:16:05 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 01:16:05 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-06-25 01:16:06 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists FKp56c1712k691lhsyewcssf40f
2025-06-25 01:16:06 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-06-25 01:16:06 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-06-25 01:16:06 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        name varchar(50) not null unique,
        description varchar(255),
        primary key (id)
    )
2025-06-25 01:16:06 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        email_verified boolean,
        login_attempts integer,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login_at timestamp(6),
        locked_until timestamp(6),
        password_reset_expires_at timestamp(6),
        role_id bigint not null,
        updated_at timestamp(6),
        phone varchar(15),
        first_name varchar(100) not null,
        last_name varchar(100) not null,
        created_by varchar(255),
        email varchar(255) not null unique,
        email_verification_token varchar(255),
        password varchar(255) not null,
        password_reset_token varchar(255),
        status varchar(255) not null check (status in ('ACTIVE','INACTIVE','SUSPENDED','PENDING_VERIFICATION','DELETED')),
        primary key (id)
    )
2025-06-25 01:16:06 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint FKp56c1712k691lhsyewcssf40f 
       foreign key (role_id) 
       references roles
2025-06-25 01:16:06 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 01:16:06 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-25 01:16:07 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 01:16:07 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 01:16:07 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 01:16:08 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 01:16:08 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 01:16:09 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 01:16:09 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 01:16:10 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 12.359 seconds (process running for 13.241)
2025-06-25 01:16:10 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles
2025-06-25 01:16:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:16:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:16:10 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default ADMINISTRATOR role
2025-06-25 01:16:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:16:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:16:10 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default STAFF role
2025-06-25 01:16:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:16:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:16:10 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default MANAGER role
2025-06-25 01:16:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:16:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:16:10 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default CUSTOMER role
2025-06-25 01:16:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:16:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:16:10 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default SUPPORT_TEAM role
2025-06-25 01:16:11 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default administrator account
2025-06-25 01:16:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-06-25 01:16:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 01:16:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.User */insert 
    into
        users (created_at, created_by, email, email_verification_token, email_verified, first_name, last_login_at, last_name, locked_until, login_attempts, password, password_reset_expires_at, password_reset_token, phone, role_id, status, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-25 01:16:11 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default administrator account created successfully: admin@cem.com
2025-06-25 01:17:07 [http-nio-8081-exec-4] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-25 01:17:07 [http-nio-8081-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-25 01:17:07 [http-nio-8081-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-25 01:17:07 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-06-25 01:17:07 [http-nio-8081-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:17:07 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-06-25 01:17:08 [http-nio-8081-exec-4] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 437 ms
2025-06-25 01:17:35 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-06-25 01:17:35 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:17:35 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-06-25 01:23:08 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 01:23:09 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 01:23:09 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 01:23:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-06-25 01:23:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists FKp56c1712k691lhsyewcssf40f
2025-06-25 01:23:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-06-25 01:23:09 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-06-25 01:23:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 01:23:10 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 01:24:13 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 31016 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 01:24:13 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 01:24:13 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 01:24:13 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-25 01:24:13 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-25 01:24:14 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 01:24:15 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 01:24:15 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 84 ms. Found 2 JPA repository interfaces.
2025-06-25 01:24:17 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 01:24:17 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 01:24:17 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 01:24:17 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 01:24:17 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3514 ms
2025-06-25 01:24:17 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 01:24:17 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-25 01:24:17 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 01:24:17 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 01:24:17 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 01:24:18 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@344d4d70
2025-06-25 01:24:18 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 01:24:19 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 01:24:19 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 01:24:20 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 01:24:20 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-06-25 01:24:20 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists FKp56c1712k691lhsyewcssf40f
2025-06-25 01:24:20 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-06-25 01:24:20 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-06-25 01:24:20 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        name varchar(50) not null unique,
        description varchar(255),
        primary key (id)
    )
2025-06-25 01:24:20 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        email_verified boolean,
        login_attempts integer,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login_at timestamp(6),
        locked_until timestamp(6),
        password_reset_expires_at timestamp(6),
        role_id bigint not null,
        updated_at timestamp(6),
        phone varchar(15),
        first_name varchar(100) not null,
        last_name varchar(100) not null,
        created_by varchar(255),
        email varchar(255) not null unique,
        email_verification_token varchar(255),
        password varchar(255) not null,
        password_reset_token varchar(255),
        status varchar(255) not null check (status in ('ACTIVE','INACTIVE','SUSPENDED','PENDING_VERIFICATION','DELETED')),
        primary key (id)
    )
2025-06-25 01:24:20 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint FKp56c1712k691lhsyewcssf40f 
       foreign key (role_id) 
       references roles
2025-06-25 01:24:21 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 01:24:21 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-25 01:24:22 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 01:24:22 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 01:24:22 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 01:24:22 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 01:24:23 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 01:24:23 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 01:24:23 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 01:24:23 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 11.159 seconds (process running for 11.804)
2025-06-25 01:24:23 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles
2025-06-25 01:24:24 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:24:24 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:24:24 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default ADMINISTRATOR role
2025-06-25 01:24:24 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:24:24 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:24:24 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default STAFF role
2025-06-25 01:24:24 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:24:24 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:24:24 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default MANAGER role
2025-06-25 01:24:24 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:24:24 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:24:24 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default CUSTOMER role
2025-06-25 01:24:24 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:24:24 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:24:24 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default SUPPORT_TEAM role
2025-06-25 01:24:24 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default administrator account
2025-06-25 01:24:24 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-06-25 01:24:24 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 01:24:25 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.User */insert 
    into
        users (created_at, created_by, email, email_verification_token, email_verified, first_name, last_login_at, last_name, locked_until, login_attempts, password, password_reset_expires_at, password_reset_token, phone, role_id, status, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-25 01:24:25 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default administrator account created successfully: admin@cem.com
2025-06-25 01:24:37 [http-nio-8081-exec-3] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-25 01:24:37 [http-nio-8081-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-25 01:24:37 [http-nio-8081-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-06-25 01:24:37 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-06-25 01:24:37 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:24:37 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-06-25 01:24:38 [http-nio-8081-exec-3] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 389 ms
2025-06-25 01:24:59 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-06-25 01:24:59 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:24:59 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-06-25 01:24:59 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2025-06-25 01:24:59 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:24:59 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2025-06-25 01:24:59 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2025-06-25 01:24:59 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2025-06-25 01:24:59 [http-nio-8081-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:24:59 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2025-06-25 01:24:59 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2025-06-25 01:24:59 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2025-06-25 01:24:59 [http-nio-8081-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:24:59 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:24:59 [http-nio-8081-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:24:59 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2025-06-25 01:24:59 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2025-06-25 01:24:59 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2025-06-25 01:24:59 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api-docs/swagger-config
2025-06-25 01:24:59 [http-nio-8081-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:24:59 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api-docs/swagger-config
2025-06-25 01:24:59 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-06-25 01:24:59 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:24:59 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-06-25 01:25:06 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-06-25 01:25:06 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:25:06 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-06-25 01:29:35 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-06-25 01:29:35 [http-nio-8081-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 01:29:35 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-06-25 01:29:42 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 01:29:44 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 01:29:44 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 01:29:44 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-06-25 01:29:44 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists FKp56c1712k691lhsyewcssf40f
2025-06-25 01:29:44 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-06-25 01:29:44 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-06-25 01:29:44 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 01:29:44 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 01:30:03 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 32456 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 01:30:03 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 01:30:03 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 01:30:03 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-25 01:30:03 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-25 01:30:05 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 01:30:06 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 01:30:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 80 ms. Found 2 JPA repository interfaces.
2025-06-25 01:30:08 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 01:30:08 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 01:30:08 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 01:30:08 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 01:30:08 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4645 ms
2025-06-25 01:30:08 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 01:30:08 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-25 01:30:08 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 01:30:09 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 01:30:09 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 01:30:10 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@127343a7
2025-06-25 01:30:10 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 01:30:10 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 01:30:10 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 01:30:11 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 01:30:11 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-06-25 01:30:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists FKp56c1712k691lhsyewcssf40f
2025-06-25 01:30:11 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-06-25 01:30:11 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-06-25 01:30:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        name varchar(50) not null unique,
        description varchar(255),
        primary key (id)
    )
2025-06-25 01:30:11 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        email_verified boolean,
        login_attempts integer,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login_at timestamp(6),
        locked_until timestamp(6),
        password_reset_expires_at timestamp(6),
        role_id bigint not null,
        updated_at timestamp(6),
        phone varchar(15),
        first_name varchar(100) not null,
        last_name varchar(100) not null,
        created_by varchar(255),
        email varchar(255) not null unique,
        email_verification_token varchar(255),
        password varchar(255) not null,
        password_reset_token varchar(255),
        status varchar(255) not null check (status in ('ACTIVE','INACTIVE','SUSPENDED','PENDING_VERIFICATION','DELETED')),
        primary key (id)
    )
2025-06-25 01:30:12 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint FKp56c1712k691lhsyewcssf40f 
       foreign key (role_id) 
       references roles
2025-06-25 01:30:12 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 01:30:12 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-25 01:30:13 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 01:30:13 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 01:30:13 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 01:30:13 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 01:30:14 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 01:30:14 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 01:30:14 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 01:30:14 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 12.065 seconds (process running for 12.872)
2025-06-25 01:30:14 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles
2025-06-25 01:30:15 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:30:15 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:30:15 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default ADMINISTRATOR role
2025-06-25 01:30:15 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:30:15 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:30:15 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default STAFF role
2025-06-25 01:30:15 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:30:15 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:30:15 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default MANAGER role
2025-06-25 01:30:15 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:30:15 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:30:15 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default CUSTOMER role
2025-06-25 01:30:15 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:30:15 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:30:15 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default SUPPORT_TEAM role
2025-06-25 01:30:15 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default administrator account
2025-06-25 01:30:15 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-06-25 01:30:15 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 01:30:16 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.User */insert 
    into
        users (created_at, created_by, email, email_verification_token, email_verified, first_name, last_login_at, last_name, locked_until, login_attempts, password, password_reset_expires_at, password_reset_token, phone, role_id, status, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-25 01:30:16 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default administrator account created successfully: admin@cem.com
2025-06-25 01:32:19 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 01:32:21 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 01:32:21 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 01:32:21 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-06-25 01:32:21 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists FKp56c1712k691lhsyewcssf40f
2025-06-25 01:32:21 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-06-25 01:32:21 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-06-25 01:32:22 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 01:32:22 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 01:40:21 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 34136 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 01:40:21 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 01:40:21 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 01:40:21 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-25 01:40:21 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-25 01:40:22 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 01:40:23 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 01:40:23 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 85 ms. Found 2 JPA repository interfaces.
2025-06-25 01:40:25 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 01:40:25 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 01:40:25 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 01:40:25 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 01:40:25 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4042 ms
2025-06-25 01:40:25 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 01:40:25 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-25 01:40:25 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 01:40:26 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 01:40:26 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 01:40:27 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@127343a7
2025-06-25 01:40:27 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 01:40:27 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 01:40:27 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 01:40:29 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 01:40:29 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-06-25 01:40:29 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists FKp56c1712k691lhsyewcssf40f
2025-06-25 01:40:29 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-06-25 01:40:29 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-06-25 01:40:29 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        name varchar(50) not null unique,
        description varchar(255),
        primary key (id)
    )
2025-06-25 01:40:29 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        email_verified boolean,
        login_attempts integer,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login_at timestamp(6),
        locked_until timestamp(6),
        password_reset_expires_at timestamp(6),
        role_id bigint not null,
        updated_at timestamp(6),
        phone varchar(15),
        first_name varchar(100) not null,
        last_name varchar(100) not null,
        created_by varchar(255),
        email varchar(255) not null unique,
        email_verification_token varchar(255),
        password varchar(255) not null,
        password_reset_token varchar(255),
        status varchar(255) not null check (status in ('ACTIVE','INACTIVE','SUSPENDED','PENDING_VERIFICATION','DELETED')),
        primary key (id)
    )
2025-06-25 01:40:29 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint FKp56c1712k691lhsyewcssf40f 
       foreign key (role_id) 
       references roles
2025-06-25 01:40:29 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 01:40:30 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-25 01:40:31 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 01:40:31 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 01:40:31 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 01:40:31 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 01:40:32 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 01:40:32 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 01:40:32 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 01:40:32 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 12.514 seconds (process running for 13.792)
2025-06-25 01:40:32 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles
2025-06-25 01:40:32 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:40:33 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:40:33 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default ADMINISTRATOR role
2025-06-25 01:40:33 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:40:33 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:40:33 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default STAFF role
2025-06-25 01:40:33 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:40:33 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:40:33 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default MANAGER role
2025-06-25 01:40:33 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:40:33 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:40:33 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default CUSTOMER role
2025-06-25 01:40:33 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 01:40:33 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 01:40:33 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default SUPPORT_TEAM role
2025-06-25 01:40:33 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default administrator account
2025-06-25 01:40:33 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-06-25 01:40:33 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 01:40:34 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.User */insert 
    into
        users (created_at, created_by, email, email_verification_token, email_verified, first_name, last_login_at, last_name, locked_until, login_attempts, password, password_reset_expires_at, password_reset_token, phone, role_id, status, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-25 01:40:34 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default administrator account created successfully: admin@cem.com
2025-06-25 19:40:54 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 22104 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 19:40:54 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 19:40:54 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 19:40:54 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-25 19:40:54 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-25 19:40:55 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 19:40:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 19:40:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 196 ms. Found 2 JPA repository interfaces.
2025-06-25 19:40:59 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 19:40:59 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 19:40:59 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 19:40:59 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 19:40:59 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5082 ms
2025-06-25 19:40:59 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 19:41:00 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-25 19:41:00 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 19:41:00 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 19:41:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 19:41:02 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@3d962dc4
2025-06-25 19:41:02 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 19:41:02 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 19:41:02 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 19:41:03 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 19:41:03 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-06-25 19:41:03 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists FKp56c1712k691lhsyewcssf40f
2025-06-25 19:41:03 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-06-25 19:41:03 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-06-25 19:41:03 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        name varchar(50) not null unique,
        description varchar(255),
        primary key (id)
    )
2025-06-25 19:41:03 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        email_verified boolean,
        login_attempts integer,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login_at timestamp(6),
        locked_until timestamp(6),
        password_reset_expires_at timestamp(6),
        role_id bigint not null,
        updated_at timestamp(6),
        phone varchar(15),
        first_name varchar(100) not null,
        last_name varchar(100) not null,
        created_by varchar(255),
        email varchar(255) not null unique,
        email_verification_token varchar(255),
        password varchar(255) not null,
        password_reset_token varchar(255),
        status varchar(255) not null check (status in ('ACTIVE','INACTIVE','SUSPENDED','PENDING_VERIFICATION','DELETED')),
        primary key (id)
    )
2025-06-25 19:41:03 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint FKp56c1712k691lhsyewcssf40f 
       foreign key (role_id) 
       references roles
2025-06-25 19:41:03 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 19:41:04 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-25 19:41:08 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 19:41:08 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 19:41:08 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 19:41:09 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 19:41:10 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 19:41:10 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 19:41:10 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 19:41:11 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 17.836 seconds (process running for 18.829)
2025-06-25 19:41:11 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles
2025-06-25 19:41:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:41:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:41:11 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default USER role
2025-06-25 19:41:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:41:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:41:11 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default ADMIN role
2025-06-25 19:41:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:41:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:41:11 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default MODERATOR role
2025-06-25 19:41:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:41:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:41:11 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default SUPER_ADMIN role
2025-06-25 19:41:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:41:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:41:11 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default STAFF role
2025-06-25 19:41:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:41:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:41:12 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default MANAGER role
2025-06-25 19:41:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:41:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:41:12 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default SUPPORT_TEAM role
2025-06-25 19:41:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:41:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:41:12 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default TECHNICIAN role
2025-06-25 19:41:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:41:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:41:13 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default LEAD_TECH role
2025-06-25 19:41:13 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:41:13 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:41:13 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default CHATBOT role
2025-06-25 19:41:13 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 19:41:13 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 19:41:13 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.User */insert 
    into
        users (created_at, created_by, email, email_verification_token, email_verified, first_name, last_login_at, last_name, locked_until, login_attempts, password, password_reset_expires_at, password_reset_token, phone, role_id, status, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-25 19:41:13 [restartedMain] WARN  c.g.c.c.s.UserManagementService - Default admin account created -> email: admin@cem.local , password: Y&uv$8iy0Z3Z
2025-06-25 19:42:06 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-06-25 19:42:06 [Thread-1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 19:42:07 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 19:42:07 [Thread-1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 19:42:07 [Thread-1] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-06-25 19:42:07 [Thread-1] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists FKp56c1712k691lhsyewcssf40f
2025-06-25 19:42:07 [Thread-1] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-06-25 19:42:07 [Thread-1] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-06-25 19:42:07 [Thread-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 19:42:07 [Thread-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 19:42:07 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 22104 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 19:42:07 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 19:42:07 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 19:42:08 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 19:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 19:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 2 JPA repository interfaces.
2025-06-25 19:42:08 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 19:42:08 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 19:42:08 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 19:42:08 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 19:42:08 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 558 ms
2025-06-25 19:42:08 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 19:42:08 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 19:42:08 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 19:42:08 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 19:42:09 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@2ee3c75f
2025-06-25 19:42:09 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 19:42:09 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 19:42:09 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 19:42:09 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 19:42:09 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        id bigint generated by default as identity,
        created_at timestamp(6) not null,
        description varchar(255),
        name varchar(50) not null,
        updated_at timestamp(6),
        primary key (id)
    )
2025-06-25 19:42:10 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        id bigint generated by default as identity,
        created_at timestamp(6) not null,
        created_by varchar(255),
        email varchar(255) not null,
        email_verification_token varchar(255),
        email_verified boolean,
        first_name varchar(100) not null,
        last_login_at timestamp(6),
        last_name varchar(100) not null,
        locked_until timestamp(6),
        login_attempts integer,
        password varchar(255) not null,
        password_reset_expires_at timestamp(6),
        password_reset_token varchar(255),
        phone varchar(15),
        status varchar(255) not null check (status in ('ACTIVE','INACTIVE','SUSPENDED','PENDING_VERIFICATION','DELETED')),
        updated_at timestamp(6),
        role_id bigint not null,
        primary key (id)
    )
2025-06-25 19:42:10 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists roles 
       drop constraint if exists UKofx66keruapi6vyqpv6f2or37
2025-06-25 19:42:10 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-25 19:42:10 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "ukofx66keruapi6vyqpv6f2or37" of relation "roles" does not exist, skipping
2025-06-25 19:42:10 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists roles 
       add constraint UKofx66keruapi6vyqpv6f2or37 unique (name)
2025-06-25 19:42:10 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists UK6dotkott2kjsp8vw4d0m25fb7
2025-06-25 19:42:10 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-25 19:42:10 [restartedMain] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "uk6dotkott2kjsp8vw4d0m25fb7" of relation "users" does not exist, skipping
2025-06-25 19:42:10 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint UK6dotkott2kjsp8vw4d0m25fb7 unique (email)
2025-06-25 19:42:10 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint FKp56c1712k691lhsyewcssf40f 
       foreign key (role_id) 
       references roles
2025-06-25 19:42:10 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 19:42:10 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 19:42:10 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 19:42:10 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 19:42:11 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 19:42:11 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 19:42:11 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 19:42:11 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 19:42:11 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 3.642 seconds (process running for 79.313)
2025-06-25 19:42:11 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles
2025-06-25 19:42:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:42:11 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default USER role
2025-06-25 19:42:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:42:11 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default ADMIN role
2025-06-25 19:42:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:42:12 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default MODERATOR role
2025-06-25 19:42:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:42:12 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default SUPER_ADMIN role
2025-06-25 19:42:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:42:12 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default STAFF role
2025-06-25 19:42:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:42:12 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default MANAGER role
2025-06-25 19:42:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:42:12 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default SUPPORT_TEAM role
2025-06-25 19:42:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:42:12 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default TECHNICIAN role
2025-06-25 19:42:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:12 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:42:13 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default LEAD_TECH role
2025-06-25 19:42:13 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:13 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:42:13 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default CHATBOT role
2025-06-25 19:42:13 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 19:42:13 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 19:42:13 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.User */insert 
    into
        users (created_at, created_by, email, email_verification_token, email_verified, first_name, last_login_at, last_name, locked_until, login_attempts, password, password_reset_expires_at, password_reset_token, phone, role_id, status, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-25 19:42:13 [restartedMain] WARN  c.g.c.c.s.UserManagementService - Default admin account created -> email: admin@cem.local , password: h4A3aQr&swIB
2025-06-25 19:42:14 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 19:42:15 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-06-25 19:42:15 [Thread-5] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 19:42:16 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 19:42:16 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 19:42:16 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 19:42:17 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 19:42:17 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 22104 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 19:42:17 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 19:42:17 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 19:42:17 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 19:42:17 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 19:42:17 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 2 JPA repository interfaces.
2025-06-25 19:42:17 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 19:42:17 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 19:42:17 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 19:42:17 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 19:42:17 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 456 ms
2025-06-25 19:42:17 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 19:42:17 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 19:42:17 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 19:42:17 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 19:42:18 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@597e9612
2025-06-25 19:42:18 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 19:42:18 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 19:42:18 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 19:42:18 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 19:42:19 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 19:42:19 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 19:42:19 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 19:42:19 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 19:42:19 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 19:42:19 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 19:42:20 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 19:42:20 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 19:42:20 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 3.035 seconds (process running for 87.931)
2025-06-25 19:42:20 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles
2025-06-25 19:42:20 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:20 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:20 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:20 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:20 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:20 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:20 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:20 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:20 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:20 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:42:20 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 19:42:20 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 19:42:21 [restartedMain] WARN  c.g.c.c.s.UserManagementService - Default admin account already existed -> password has been reset. email: admin@cem.local  newPassword: Abc123!@
2025-06-25 19:42:21 [restartedMain] DEBUG org.hibernate.SQL - 
    /* update
        for com.g47.cem.cemauthentication.entity.User */update users 
    set
        created_by=?,
        email=?,
        email_verification_token=?,
        email_verified=?,
        first_name=?,
        last_login_at=?,
        last_name=?,
        locked_until=?,
        login_attempts=?,
        password=?,
        password_reset_expires_at=?,
        password_reset_token=?,
        phone=?,
        role_id=?,
        status=?,
        updated_at=? 
    where
        id=?
2025-06-25 19:42:21 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 19:47:11 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 19:47:12 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 19:47:12 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 19:47:12 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 19:47:12 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 19:47:30 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 21828 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 19:47:30 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 19:47:30 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 19:47:30 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-25 19:47:30 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-25 19:47:32 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 19:47:33 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 19:47:33 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 80 ms. Found 2 JPA repository interfaces.
2025-06-25 19:47:34 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 19:47:34 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 19:47:34 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 19:47:34 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 19:47:34 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3700 ms
2025-06-25 19:47:34 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 19:47:34 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-25 19:47:35 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 19:47:35 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 19:47:35 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 19:47:36 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@7d70d7b8
2025-06-25 19:47:36 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 19:47:36 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 19:47:36 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 19:47:37 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 19:47:38 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 19:47:38 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-25 19:47:41 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 19:47:42 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 19:47:42 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 19:47:42 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 19:47:43 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 19:47:43 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 19:47:44 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 19:47:44 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 14.383 seconds (process running for 15.179)
2025-06-25 19:47:44 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles
2025-06-25 19:47:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:47:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:47:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:47:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:47:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:47:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:47:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:47:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:47:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:47:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:47:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 19:47:45 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 19:47:45 [restartedMain] WARN  c.g.c.c.s.UserManagementService - Default admin account already existed -> password has been reset. email: admin@cem.local  newPassword: Abc123!@
2025-06-25 19:47:45 [restartedMain] DEBUG org.hibernate.SQL - 
    /* update
        for com.g47.cem.cemauthentication.entity.User */update users 
    set
        created_by=?,
        email=?,
        email_verification_token=?,
        email_verified=?,
        first_name=?,
        last_login_at=?,
        last_name=?,
        locked_until=?,
        login_attempts=?,
        password=?,
        password_reset_expires_at=?,
        password_reset_token=?,
        phone=?,
        role_id=?,
        status=?,
        updated_at=? 
    where
        id=?
2025-06-25 19:50:19 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 19:50:21 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 19:50:21 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 19:50:21 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 19:50:21 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 19:50:57 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 25772 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 19:50:57 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 19:50:57 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 19:50:57 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-25 19:50:57 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-25 19:50:58 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 19:50:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 19:50:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 42 ms. Found 2 JPA repository interfaces.
2025-06-25 19:50:59 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 19:50:59 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 19:50:59 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 19:50:59 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 19:50:59 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1864 ms
2025-06-25 19:50:59 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 19:50:59 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-25 19:50:59 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 19:50:59 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 19:50:59 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 19:51:00 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@390fa9c0
2025-06-25 19:51:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 19:51:00 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 19:51:00 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 19:51:01 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 19:51:02 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 19:51:02 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-25 19:51:04 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 19:51:05 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 19:51:05 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 19:51:05 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 19:51:05 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 19:51:06 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-06-25 19:51:06 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 19:51:06 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 9.25 seconds (process running for 9.628)
2025-06-25 19:51:06 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles
2025-06-25 19:51:06 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:51:06 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:51:06 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:51:06 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:51:06 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:51:06 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:51:06 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:51:06 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:51:06 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:51:06 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:51:06 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 19:51:07 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 19:51:07 [restartedMain] WARN  c.g.c.c.s.UserManagementService - Default admin account already existed -> password has been reset. email: admin@cem.local  newPassword: Abc123!@
2025-06-25 19:51:07 [restartedMain] DEBUG org.hibernate.SQL - 
    /* update
        for com.g47.cem.cemauthentication.entity.User */update users 
    set
        created_by=?,
        email=?,
        email_verification_token=?,
        email_verified=?,
        first_name=?,
        last_login_at=?,
        last_name=?,
        locked_until=?,
        login_attempts=?,
        password=?,
        password_reset_expires_at=?,
        password_reset_token=?,
        phone=?,
        role_id=?,
        status=?,
        updated_at=? 
    where
        id=?
2025-06-25 19:52:12 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 19:52:13 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 19:52:13 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 19:52:13 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 19:52:13 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 19:52:56 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 9832 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 19:52:56 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 19:52:56 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 19:52:56 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-25 19:52:56 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-25 19:52:58 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 19:52:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 19:52:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 70 ms. Found 2 JPA repository interfaces.
2025-06-25 19:53:00 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 19:53:00 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 19:53:00 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 19:53:00 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 19:53:00 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3479 ms
2025-06-25 19:53:00 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 19:53:00 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-25 19:53:00 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 19:53:01 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 19:53:01 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 19:53:02 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@af3a388
2025-06-25 19:53:02 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 19:53:02 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 19:53:02 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 19:53:03 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 19:53:04 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 19:53:04 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-25 19:53:07 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 19:53:07 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 19:53:07 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 19:53:08 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 19:53:08 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 19:53:09 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 19:53:09 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 19:53:09 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 13.97 seconds (process running for 14.851)
2025-06-25 19:53:09 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles
2025-06-25 19:53:09 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:53:10 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default MODERATOR role
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:53:10 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default SUPER_ADMIN role
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:53:10 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default SUPPORT_TEAM role
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:53:10 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default LEAD_TECH role
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 19:53:10 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default CHATBOT role
2025-06-25 19:53:10 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 19:53:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 19:53:11 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 19:53:11 [restartedMain] WARN  c.g.c.c.s.UserManagementService - Default admin account already existed -> password has been reset. email: admin@cem.local  newPassword: Abc123!@
2025-06-25 19:53:11 [restartedMain] DEBUG org.hibernate.SQL - 
    /* update
        for com.g47.cem.cemauthentication.entity.User */update users 
    set
        created_by=?,
        email=?,
        email_verification_token=?,
        email_verified=?,
        first_name=?,
        last_login_at=?,
        last_name=?,
        locked_until=?,
        login_attempts=?,
        password=?,
        password_reset_expires_at=?,
        password_reset_token=?,
        phone=?,
        role_id=?,
        status=?,
        updated_at=? 
    where
        id=?
2025-06-25 19:53:11 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-25 19:53:11 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-25 19:53:11 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-06-25 19:53:11 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-06-25 19:53:12 [http-nio-8081-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 19:53:12 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-06-25 19:53:12 [http-nio-8081-exec-1] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 563 ms
2025-06-25 19:53:19 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api-docs
2025-06-25 19:53:19 [http-nio-8081-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 19:53:19 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api-docs
2025-06-25 19:55:27 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/login
2025-06-25 19:55:27 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /v1/auth/login
2025-06-25 19:55:27 [http-nio-8081-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-25 19:55:27 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /v1/auth/login
2025-06-25 19:55:27 [http-nio-8081-exec-6] WARN  c.g.c.c.e.GlobalExceptionHandler - Validation failed for request: /api/auth/v1/auth/login - Errors: {email=Please provide a valid email address}
2025-06-25 19:55:27 [http-nio-8081-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.g47.cem.cemauthentication.dto.response.ApiResponse<com.g47.cem.cemauthentication.dto.response.AuthResponse>> com.g47.cem.cemauthentication.controller.AuthController.login(com.g47.cem.cemauthentication.dto.request.LoginRequest,jakarta.servlet.http.HttpServletRequest): [Field error in object 'loginRequest' on field 'email': rejected value [string]; codes [Email.loginRequest.email,Email.email,Email.java.lang.String,Email]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [loginRequest.email,email]; arguments []; default message [email],[Ljakarta.validation.constraints.Pattern$Flag;@9465bca,.*]; default message [Please provide a valid email address]] ]
2025-06-25 19:56:36 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 19:56:36 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 19:56:36 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 19:56:36 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 19:56:36 [http-nio-8081-exec-10] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 19:56:36 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 19:56:36 [http-nio-8081-exec-9] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 19:56:36 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 19:56:36 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 19:56:36 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 19:56:36 [http-nio-8081-exec-10] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 19:56:36 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 19:56:36 [http-nio-8081-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 19:56:36 [http-nio-8081-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 19:56:36 [http-nio-8081-exec-10] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 19:56:36 [http-nio-8081-exec-10] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 19:56:36 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 19:56:36 [http-nio-8081-exec-9] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 19:56:36 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 19:56:36 [http-nio-8081-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 19:56:36 [http-nio-8081-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 19:56:36 [http-nio-8081-exec-9] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 19:56:36 [http-nio-8081-exec-9] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 19:56:36 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 19:56:37 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 19:56:41 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?roleId=2&page=0&size=20
2025-06-25 19:56:41 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?roleId=2&page=0&size=20
2025-06-25 19:56:41 [http-nio-8081-exec-4] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 19:56:41 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 19:56:41 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 19:56:41 [http-nio-8081-exec-4] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 19:56:41 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?roleId=2&page=0&size=20
2025-06-25 19:56:41 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 19:56:41 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 19:56:41 [http-nio-8081-exec-4] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=2, status=null
2025-06-25 19:56:41 [http-nio-8081-exec-4] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=2, status=null page=0 size=20
2025-06-25 19:56:41 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 19:56:46 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?roleId=12&page=0&size=20
2025-06-25 19:56:46 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?roleId=12&page=0&size=20
2025-06-25 19:56:46 [http-nio-8081-exec-6] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 19:56:46 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 19:56:46 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 19:56:46 [http-nio-8081-exec-6] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 19:56:46 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?roleId=12&page=0&size=20
2025-06-25 19:56:46 [http-nio-8081-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 19:56:46 [http-nio-8081-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 19:56:46 [http-nio-8081-exec-6] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=12, status=null
2025-06-25 19:56:46 [http-nio-8081-exec-6] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=12, status=null page=0 size=20
2025-06-25 19:56:46 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 19:56:46 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 19:56:49 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 19:56:49 [http-nio-8081-exec-8] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 19:56:49 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 19:56:49 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 19:56:50 [http-nio-8081-exec-8] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 19:56:50 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 19:56:50 [http-nio-8081-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 19:56:50 [http-nio-8081-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 19:56:50 [http-nio-8081-exec-8] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 19:56:50 [http-nio-8081-exec-8] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 19:56:50 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 19:56:50 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:01:40 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?search=V&page=0&size=20
2025-06-25 20:01:40 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?search=V&page=0&size=20
2025-06-25 20:01:40 [http-nio-8081-exec-9] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:01:40 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:01:40 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:01:40 [http-nio-8081-exec-9] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:01:40 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?search=V&page=0&size=20
2025-06-25 20:01:40 [http-nio-8081-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:01:40 [http-nio-8081-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:01:40 [http-nio-8081-exec-9] INFO  c.g.c.c.controller.AuthController - Get users request received: search=V, roleId=null, status=null
2025-06-25 20:01:40 [http-nio-8081-exec-9] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=V, roleId=null, status=null page=0 size=20
2025-06-25 20:01:40 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:01:41 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?search=A&page=0&size=20
2025-06-25 20:01:41 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?search=A&page=0&size=20
2025-06-25 20:01:41 [http-nio-8081-exec-2] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:01:41 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:01:41 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:01:41 [http-nio-8081-exec-2] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:01:42 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?search=A&page=0&size=20
2025-06-25 20:01:42 [http-nio-8081-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:01:42 [http-nio-8081-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:01:42 [http-nio-8081-exec-2] INFO  c.g.c.c.controller.AuthController - Get users request received: search=A, roleId=null, status=null
2025-06-25 20:01:42 [http-nio-8081-exec-2] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=A, roleId=null, status=null page=0 size=20
2025-06-25 20:01:42 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:01:42 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:02:22 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-06-25 20:02:22 [Thread-1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:02:23 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:02:23 [Thread-1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:02:23 [Thread-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:02:23 [Thread-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:02:23 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 9832 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:02:23 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:02:23 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:02:23 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:02:24 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:02:24 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 2 JPA repository interfaces.
2025-06-25 20:02:24 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:02:24 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:02:24 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:02:24 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:02:24 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 550 ms
2025-06-25 20:02:24 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:02:24 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:02:24 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:02:24 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:02:25 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@8dff97e
2025-06-25 20:02:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:02:25 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:02:25 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:02:25 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:02:26 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:02:26 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:02:26 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:02:26 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:02:26 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:02:26 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:02:26 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:02:26 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:02:26 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 3.294 seconds (process running for 572.05)
2025-06-25 20:02:27 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:02:27 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:02:27 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:02:27 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:02:27 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:02:27 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:02:27 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:02:27 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 20:02:33 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-25 20:02:33 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-25 20:02:33 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-06-25 20:02:33 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:02:33 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:02:33 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:02:33 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:02:33 [http-nio-8081-exec-3] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:02:33 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:02:33 [http-nio-8081-exec-4] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:02:33 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:02:33 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:02:33 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:02:33 [http-nio-8081-exec-3] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:02:34 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:02:34 [http-nio-8081-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:02:34 [http-nio-8081-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:02:34 [http-nio-8081-exec-3] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:02:34 [http-nio-8081-exec-3] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:02:34 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:02:34 [http-nio-8081-exec-4] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:02:34 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:02:34 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:02:34 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:02:34 [http-nio-8081-exec-4] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:02:34 [http-nio-8081-exec-4] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:02:34 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:02:34 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:02:39 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:02:39 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:02:39 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:02:39 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:02:40 [http-nio-8081-exec-7] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:02:40 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:02:40 [http-nio-8081-exec-8] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:02:40 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:02:40 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:02:40 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:02:40 [http-nio-8081-exec-7] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:02:40 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:02:40 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:02:40 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:02:40 [http-nio-8081-exec-7] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:02:40 [http-nio-8081-exec-7] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:02:40 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:02:40 [http-nio-8081-exec-8] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:02:40 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:02:40 [http-nio-8081-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:02:40 [http-nio-8081-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:02:40 [http-nio-8081-exec-8] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:02:40 [http-nio-8081-exec-8] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:02:40 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:03:00 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/create-user
2025-06-25 20:03:00 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing POST /v1/auth/admin/create-user
2025-06-25 20:03:01 [http-nio-8081-exec-10] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:03:01 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:03:01 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:03:01 [http-nio-8081-exec-10] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:03:01 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured POST /v1/auth/admin/create-user
2025-06-25 20:03:01 [http-nio-8081-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.createUser(com.g47.cem.cemauthentication.dto.request.CreateUserRequest,org.springframework.security.core.Authentication,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:03:01 [http-nio-8081-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.createUser(com.g47.cem.cemauthentication.dto.request.CreateUserRequest,org.springframework.security.core.Authentication,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:03:01 [http-nio-8081-exec-10] INFO  c.g.c.c.controller.AuthController - Create user request received by admin: admin@cem.local for email: longrpk200313@gmail.com
2025-06-25 20:03:01 [http-nio-8081-exec-10] INFO  c.g.c.c.s.UserManagementService - Creating user account by admin: admin@cem.local for email: longrpk200313@gmail.com
2025-06-25 20:03:01 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-06-25 20:03:01 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:03:01 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.User */insert 
    into
        users (created_at, created_by, email, email_verification_token, email_verified, first_name, last_login_at, last_name, locked_until, login_attempts, password, password_reset_expires_at, password_reset_token, phone, role_id, status, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-25 20:03:01 [CEM-Async-1] INFO  c.g.c.c.service.EmailService - Sending account creation email to: longrpk200313@gmail.com
2025-06-25 20:03:01 [http-nio-8081-exec-10] INFO  c.g.c.c.s.UserManagementService - User account created successfully by admin: admin@cem.local for email: longrpk200313@gmail.com
2025-06-25 20:03:02 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:03:02 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:03:02 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:03:02 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:03:02 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:03:02 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:03:02 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:03:02 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:03:03 [http-nio-8081-exec-6] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:03:03 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:03:03 [http-nio-8081-exec-8] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:03:03 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:03:03 [http-nio-8081-exec-7] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:03:03 [http-nio-8081-exec-5] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:03:03 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:03:03 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:03:03 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:03:03 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:03:03 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:03:03 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:03:03 [http-nio-8081-exec-6] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:03:03 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:03:03 [http-nio-8081-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:03:03 [http-nio-8081-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:03:03 [http-nio-8081-exec-6] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:03:03 [http-nio-8081-exec-6] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:03:03 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:03:03 [http-nio-8081-exec-8] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:03:03 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:03:03 [http-nio-8081-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:03:03 [http-nio-8081-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:03:03 [http-nio-8081-exec-8] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:03:03 [http-nio-8081-exec-8] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:03:03 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:03:03 [http-nio-8081-exec-7] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:03:03 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:03:03 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:03:03 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:03:03 [http-nio-8081-exec-7] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:03:03 [http-nio-8081-exec-7] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:03:03 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:03:03 [http-nio-8081-exec-5] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:03:03 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:03:03 [http-nio-8081-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:03:03 [http-nio-8081-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:03:03 [http-nio-8081-exec-5] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:03:03 [http-nio-8081-exec-5] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:03:03 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:03:03 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:03:03 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:03:05 [CEM-Async-1] ERROR c.g.c.c.service.EmailService - Failed to send account creation email to: longrpk200313@gmail.com. Error: Authentication failed
org.springframework.mail.MailAuthenticationException: Authentication failed
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:402) ~[spring-context-support-6.2.7.jar:6.2.7]
	at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:317) ~[spring-context-support-6.2.7.jar:6.2.7]
	at org.springframework.mail.MailSender.send(MailSender.java:42) ~[spring-context-support-6.2.7.jar:6.2.7]
	at com.g47.cem.cemauthentication.service.EmailService.sendAccountCreationEmail(EmailService.java:37) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.7.jar:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.7.jar:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.7.jar:6.2.7]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.7.jar:6.2.7]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: jakarta.mail.AuthenticationFailedException: 535-5.7.8 Username and Password not accepted. For more information, go to
535 5.7.8  https://support.google.com/mail/?p=BadCredentials d2e1a72fcca58-749c883590dsm4612593b3a.100 - gsmtp

	at org.eclipse.angus.mail.smtp.SMTPTransport$Authenticator.authenticate(SMTPTransport.java:954) ~[jakarta.mail-2.0.3.jar:na]
	at org.eclipse.angus.mail.smtp.SMTPTransport.authenticate(SMTPTransport.java:865) ~[jakarta.mail-2.0.3.jar:na]
	at org.eclipse.angus.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:769) ~[jakarta.mail-2.0.3.jar:na]
	at jakarta.mail.Service.connect(Service.java:345) ~[jakarta.mail-2.0.3.jar:na]
	at org.springframework.mail.javamail.JavaMailSenderImpl.connectTransport(JavaMailSenderImpl.java:480) ~[spring-context-support-6.2.7.jar:6.2.7]
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:399) ~[spring-context-support-6.2.7.jar:6.2.7]
	... 15 common frames omitted
2025-06-25 20:08:49 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-06-25 20:08:49 [Thread-5] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:08:50 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:08:50 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:08:50 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:08:50 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:08:51 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 9832 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:08:51 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:08:51 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:08:51 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:08:51 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:08:51 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 2 JPA repository interfaces.
2025-06-25 20:08:51 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:08:51 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:08:51 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:08:51 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:08:51 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 605 ms
2025-06-25 20:08:51 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:08:51 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:08:51 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:08:51 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:08:52 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@6f736898
2025-06-25 20:08:52 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:08:52 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:08:52 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:08:52 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:08:53 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:08:53 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:08:53 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:08:53 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:08:53 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:08:54 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:08:54 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:08:54 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:08:54 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 3.261 seconds (process running for 959.429)
2025-06-25 20:08:54 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:08:54 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:08:54 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:08:54 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:08:54 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:08:54 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:08:54 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:08:54 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 20:09:16 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-06-25 20:09:16 [Thread-9] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:09:17 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:09:17 [Thread-9] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:09:17 [Thread-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:09:17 [Thread-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:09:17 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 9832 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:09:17 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:09:17 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:09:18 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:09:18 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:09:18 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 2 JPA repository interfaces.
2025-06-25 20:09:18 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:09:18 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:09:18 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:09:18 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:09:18 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 725 ms
2025-06-25 20:09:18 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:09:18 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:09:18 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:09:18 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:09:19 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@1a3fb496
2025-06-25 20:09:19 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:09:19 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:09:19 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:09:19 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:09:20 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:09:20 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:09:20 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:09:20 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:09:20 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:09:20 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:09:21 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:09:21 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:09:21 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 3.418 seconds (process running for 986.455)
2025-06-25 20:09:21 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:09:21 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:09:21 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:09:21 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:09:21 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:09:21 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:09:21 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:09:21 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 20:09:22 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-06-25 20:09:22 [Thread-13] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:09:23 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:09:23 [Thread-13] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:09:23 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:09:24 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:09:24 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 9832 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:09:24 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:09:24 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:09:24 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:09:24 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:09:24 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 2 JPA repository interfaces.
2025-06-25 20:09:24 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:09:24 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:09:24 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:09:24 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:09:24 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 440 ms
2025-06-25 20:09:24 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:09:25 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:09:25 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:09:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:09:25 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@71ad8e50
2025-06-25 20:09:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:09:25 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:09:25 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:09:25 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:09:26 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:09:26 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:09:26 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:09:26 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:09:27 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:09:27 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:09:28 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:09:28 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:09:28 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 3.988 seconds (process running for 993.456)
2025-06-25 20:09:28 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:09:28 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:09:28 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:09:28 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:09:28 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:09:28 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:09:28 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:09:28 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 20:09:33 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-06-25 20:09:33 [Thread-17] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:09:35 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:09:35 [Thread-17] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:09:35 [Thread-17] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:09:35 [Thread-17] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:09:35 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 9832 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:09:35 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:09:35 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:09:36 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:09:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:09:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 2 JPA repository interfaces.
2025-06-25 20:09:37 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:09:37 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:09:37 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:09:37 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:09:37 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1975 ms
2025-06-25 20:09:38 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:09:38 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:09:38 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:09:38 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:09:38 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@8cbf9b4
2025-06-25 20:09:38 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:09:38 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:09:38 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:09:39 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:09:40 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:09:40 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:09:40 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:09:40 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:09:40 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:09:40 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:09:41 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:09:41 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:09:41 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 5.905 seconds (process running for 1006.747)
2025-06-25 20:09:41 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:09:41 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:09:41 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:09:41 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:09:41 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:09:41 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:09:42 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:09:42 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 20:09:42 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 3 class path changes (0 additions, 0 deletions, 3 modifications)
2025-06-25 20:09:42 [Thread-21] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:09:43 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:09:43 [Thread-21] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:09:43 [Thread-21] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:09:44 [Thread-21] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:09:44 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 9832 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:09:44 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:09:44 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:09:44 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:09:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:09:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 2 JPA repository interfaces.
2025-06-25 20:09:44 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:09:44 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:09:44 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:09:44 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:09:44 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 519 ms
2025-06-25 20:09:45 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:09:45 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:09:45 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:09:45 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:09:45 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@5950e484
2025-06-25 20:09:45 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:09:45 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:09:45 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:09:45 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:09:46 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:09:46 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:09:46 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:09:46 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:09:46 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:09:47 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:09:47 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:09:47 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:09:47 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 2.985 seconds (process running for 1012.464)
2025-06-25 20:09:47 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:09:47 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:09:47 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:09:47 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:09:47 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:09:47 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:09:47 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:09:47 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 20:10:18 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 48 class path changes (0 additions, 0 deletions, 48 modifications)
2025-06-25 20:10:18 [Thread-25] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:10:19 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:10:19 [Thread-25] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:10:19 [Thread-25] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:10:19 [Thread-25] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:10:19 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 9832 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:10:19 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:10:19 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:10:19 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:10:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:10:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 2 JPA repository interfaces.
2025-06-25 20:10:20 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:10:20 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:10:20 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:10:20 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:10:20 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 478 ms
2025-06-25 20:10:20 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:10:20 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:10:20 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:10:20 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:10:20 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@4dbd07c3
2025-06-25 20:10:20 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:10:20 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:10:21 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:10:21 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:10:21 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:10:21 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:10:22 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:10:22 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:10:22 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:10:22 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:10:22 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:10:22 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:10:22 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 2.991 seconds (process running for 1047.817)
2025-06-25 20:10:22 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:10:22 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:10:22 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:10:22 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:10:22 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:10:23 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:10:23 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:10:23 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 20:10:48 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-25 20:10:48 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-25 20:10:48 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-06-25 20:10:48 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:10:48 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:10:48 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:10:48 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:10:48 [http-nio-8081-exec-4] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:10:48 [http-nio-8081-exec-3] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:10:48 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:10:48 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:10:48 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:10:48 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:10:48 [http-nio-8081-exec-3] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:10:48 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:10:48 [http-nio-8081-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:10:48 [http-nio-8081-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:10:48 [http-nio-8081-exec-3] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:10:48 [http-nio-8081-exec-3] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:10:48 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:10:48 [http-nio-8081-exec-4] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:10:48 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:10:48 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:10:48 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:10:48 [http-nio-8081-exec-4] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:10:48 [http-nio-8081-exec-4] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:10:48 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:11:16 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /v1/auth/admin/create-user
2025-06-25 20:11:16 [http-nio-8081-exec-7] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:11:16 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:11:16 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:11:16 [http-nio-8081-exec-7] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:11:16 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /v1/auth/admin/create-user
2025-06-25 20:11:16 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.createUser(com.g47.cem.cemauthentication.dto.request.CreateUserRequest,org.springframework.security.core.Authentication,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:11:16 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.createUser(com.g47.cem.cemauthentication.dto.request.CreateUserRequest,org.springframework.security.core.Authentication,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:11:16 [http-nio-8081-exec-7] INFO  c.g.c.c.controller.AuthController - Create user request received by admin: admin@cem.local for email: danglongdo.hanoi@gmail.com
2025-06-25 20:11:16 [http-nio-8081-exec-7] INFO  c.g.c.c.s.UserManagementService - Creating user account by admin: admin@cem.local for email: danglongdo.hanoi@gmail.com
2025-06-25 20:11:16 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-06-25 20:11:16 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:11:16 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.User */insert 
    into
        users (created_at, created_by, email, email_verification_token, email_verified, first_name, last_login_at, last_name, locked_until, login_attempts, password, password_reset_expires_at, password_reset_token, phone, role_id, status, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-25 20:11:16 [http-nio-8081-exec-7] INFO  c.g.c.c.s.UserManagementService - User account created successfully by admin: admin@cem.local for email: danglongdo.hanoi@gmail.com
2025-06-25 20:11:16 [CEM-Async-1] INFO  c.g.c.c.service.UserEventListener - Handling UserCreatedEvent - sending account email to danglongdo.hanoi@gmail.com
2025-06-25 20:11:16 [CEM-Async-2] INFO  c.g.c.c.service.EmailService - Sending account creation email to: danglongdo.hanoi@gmail.com
2025-06-25 20:11:18 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:11:18 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:11:18 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:11:18 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:11:18 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:11:18 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:11:18 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:11:18 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:11:18 [http-nio-8081-exec-4] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:11:18 [http-nio-8081-exec-10] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:11:18 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:11:18 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:11:18 [http-nio-8081-exec-3] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:11:18 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:11:18 [http-nio-8081-exec-6] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:11:18 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:11:18 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:11:18 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:11:18 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:11:18 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:11:18 [http-nio-8081-exec-4] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:11:18 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:11:18 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:11:18 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:11:18 [http-nio-8081-exec-4] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:11:18 [http-nio-8081-exec-4] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:11:18 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:11:18 [http-nio-8081-exec-10] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:11:18 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:11:18 [http-nio-8081-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:11:18 [http-nio-8081-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:11:18 [http-nio-8081-exec-10] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:11:18 [http-nio-8081-exec-10] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:11:18 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:11:18 [http-nio-8081-exec-3] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:11:18 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:11:18 [http-nio-8081-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:11:18 [http-nio-8081-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:11:18 [http-nio-8081-exec-3] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:11:18 [http-nio-8081-exec-3] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:11:18 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:11:18 [http-nio-8081-exec-6] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:11:18 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:11:18 [http-nio-8081-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:11:18 [http-nio-8081-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:11:18 [http-nio-8081-exec-6] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:11:18 [http-nio-8081-exec-6] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:11:18 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:11:18 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:11:18 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:11:20 [CEM-Async-2] ERROR c.g.c.c.service.EmailService - Failed to send account creation email to: danglongdo.hanoi@gmail.com. Error: Authentication failed
org.springframework.mail.MailAuthenticationException: Authentication failed
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:402) ~[spring-context-support-6.2.7.jar:6.2.7]
	at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:317) ~[spring-context-support-6.2.7.jar:6.2.7]
	at org.springframework.mail.MailSender.send(MailSender.java:42) ~[spring-context-support-6.2.7.jar:6.2.7]
	at com.g47.cem.cemauthentication.service.EmailService.sendAccountCreationEmail(EmailService.java:37) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.7.jar:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.7.jar:6.2.7]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.7.jar:6.2.7]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114) ~[spring-aop-6.2.7.jar:6.2.7]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:842) ~[na:na]
Caused by: jakarta.mail.AuthenticationFailedException: 535-5.7.8 Username and Password not accepted. For more information, go to
535 5.7.8  https://support.google.com/mail/?p=BadCredentials 98e67ed59e1d1-315f5428ae2sm1883766a91.28 - gsmtp

	at org.eclipse.angus.mail.smtp.SMTPTransport$Authenticator.authenticate(SMTPTransport.java:954) ~[jakarta.mail-2.0.3.jar:na]
	at org.eclipse.angus.mail.smtp.SMTPTransport.authenticate(SMTPTransport.java:865) ~[jakarta.mail-2.0.3.jar:na]
	at org.eclipse.angus.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:769) ~[jakarta.mail-2.0.3.jar:na]
	at jakarta.mail.Service.connect(Service.java:345) ~[jakarta.mail-2.0.3.jar:na]
	at org.springframework.mail.javamail.JavaMailSenderImpl.connectTransport(JavaMailSenderImpl.java:480) ~[spring-context-support-6.2.7.jar:6.2.7]
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:399) ~[spring-context-support-6.2.7.jar:6.2.7]
	... 15 common frames omitted
2025-06-25 20:12:05 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:12:06 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:12:06 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:12:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:12:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:12:32 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 24456 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:12:32 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:12:32 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:12:32 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-06-25 20:12:32 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-06-25 20:12:33 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:12:34 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:12:34 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 74 ms. Found 2 JPA repository interfaces.
2025-06-25 20:12:35 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:12:35 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:12:35 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:12:35 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:12:35 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3759 ms
2025-06-25 20:12:36 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:12:36 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.15.Final
2025-06-25 20:12:36 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:12:37 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:12:37 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:12:38 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@b385872
2025-06-25 20:12:38 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:12:38 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:12:38 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:12:39 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:12:40 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:12:40 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-25 20:12:44 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:12:44 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:12:44 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:12:45 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:12:45 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:12:46 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:12:46 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:12:46 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 15.143 seconds (process running for 15.984)
2025-06-25 20:12:46 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:12:46 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:12:46 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-25 20:12:46 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-25 20:12:46 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-06-25 20:12:46 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:12:46 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:12:46 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:12:46 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:12:46 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:12:46 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:12:46 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:12:46 [http-nio-8081-exec-3] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:12:46 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:12:46 [http-nio-8081-exec-4] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:12:46 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:12:46 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:12:46 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:12:46 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:12:46 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:12:46 [http-nio-8081-exec-3] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:12:46 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:12:46 [http-nio-8081-exec-4] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:12:46 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:12:46 [http-nio-8081-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:12:46 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:12:46 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:12:46 [http-nio-8081-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:12:46 [http-nio-8081-exec-4] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:12:46 [http-nio-8081-exec-3] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:12:46 [http-nio-8081-exec-4] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:12:46 [http-nio-8081-exec-3] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:12:46 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:12:46 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:12:46 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:12:48 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:12:48 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:12:49 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:12:49 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:12:49 [http-nio-8081-exec-8] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:12:49 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:12:49 [http-nio-8081-exec-7] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:12:49 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:12:49 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:12:49 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:12:49 [http-nio-8081-exec-8] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:12:49 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:12:49 [http-nio-8081-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:12:49 [http-nio-8081-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:12:49 [http-nio-8081-exec-8] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:12:49 [http-nio-8081-exec-8] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:12:49 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:12:49 [http-nio-8081-exec-7] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:12:49 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:12:49 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:12:49 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:12:49 [http-nio-8081-exec-7] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:12:49 [http-nio-8081-exec-7] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:12:49 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:13:15 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /v1/auth/admin/create-user
2025-06-25 20:13:15 [http-nio-8081-exec-1] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:13:15 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:13:15 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:13:15 [http-nio-8081-exec-1] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:13:15 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /v1/auth/admin/create-user
2025-06-25 20:13:15 [http-nio-8081-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.createUser(com.g47.cem.cemauthentication.dto.request.CreateUserRequest,org.springframework.security.core.Authentication,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:13:15 [http-nio-8081-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.createUser(com.g47.cem.cemauthentication.dto.request.CreateUserRequest,org.springframework.security.core.Authentication,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:13:15 [http-nio-8081-exec-1] INFO  c.g.c.c.controller.AuthController - Create user request received by admin: admin@cem.local for email: longrpk200316@gmail.com
2025-06-25 20:13:15 [http-nio-8081-exec-1] INFO  c.g.c.c.s.UserManagementService - Creating user account by admin: admin@cem.local for email: longrpk200316@gmail.com
2025-06-25 20:13:15 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-06-25 20:13:15 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:13:16 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.User */insert 
    into
        users (created_at, created_by, email, email_verification_token, email_verified, first_name, last_login_at, last_name, locked_until, login_attempts, password, password_reset_expires_at, password_reset_token, phone, role_id, status, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-25 20:13:16 [http-nio-8081-exec-1] INFO  c.g.c.c.s.UserManagementService - User account created successfully by admin: admin@cem.local for email: longrpk200316@gmail.com
2025-06-25 20:13:16 [CEM-Async-1] INFO  c.g.c.c.service.UserEventListener - Handling UserCreatedEvent - sending account email to longrpk200316@gmail.com
2025-06-25 20:13:16 [CEM-Async-2] INFO  c.g.c.c.service.EmailService - Sending account creation email to: longrpk200316@gmail.com
2025-06-25 20:13:17 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:13:17 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:13:17 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:13:17 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:13:17 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:13:17 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:13:17 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:13:17 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:13:17 [http-nio-8081-exec-10] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:13:17 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:13:17 [http-nio-8081-exec-9] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:13:17 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:13:17 [http-nio-8081-exec-8] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:13:17 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:13:17 [http-nio-8081-exec-7] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:13:17 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:13:17 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:13:17 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:13:17 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:13:17 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:13:18 [http-nio-8081-exec-10] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:13:18 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:13:18 [http-nio-8081-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:13:18 [http-nio-8081-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:13:18 [http-nio-8081-exec-10] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:13:18 [http-nio-8081-exec-10] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:13:18 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:13:18 [http-nio-8081-exec-9] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:13:18 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:13:18 [http-nio-8081-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:13:18 [http-nio-8081-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:13:18 [http-nio-8081-exec-9] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:13:18 [http-nio-8081-exec-9] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:13:18 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:13:18 [http-nio-8081-exec-8] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:13:18 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:13:18 [http-nio-8081-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:13:18 [http-nio-8081-exec-8] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:13:18 [http-nio-8081-exec-8] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:13:18 [http-nio-8081-exec-8] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:13:18 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:13:18 [http-nio-8081-exec-7] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:13:18 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:13:18 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:13:18 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:13:18 [http-nio-8081-exec-7] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:13:18 [http-nio-8081-exec-7] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:13:18 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:13:18 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:13:18 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:13:18 [http-nio-8081-exec-8] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:13:18 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:13:19 [CEM-Async-2] ERROR c.g.c.c.service.EmailService - Failed to send account creation email to: longrpk200316@gmail.com. Error: Authentication failed
org.springframework.mail.MailAuthenticationException: Authentication failed
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:402)
	at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:317)
	at org.springframework.mail.MailSender.send(MailSender.java:42)
	at com.g47.cem.cemauthentication.service.EmailService.sendAccountCreationEmail(EmailService.java:37)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: jakarta.mail.AuthenticationFailedException: 535-5.7.8 Username and Password not accepted. For more information, go to
535 5.7.8  https://support.google.com/mail/?p=BadCredentials d2e1a72fcca58-749c882cdc4sm4483764b3a.84 - gsmtp

	at org.eclipse.angus.mail.smtp.SMTPTransport$Authenticator.authenticate(SMTPTransport.java:954)
	at org.eclipse.angus.mail.smtp.SMTPTransport.authenticate(SMTPTransport.java:865)
	at org.eclipse.angus.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:769)
	at jakarta.mail.Service.connect(Service.java:345)
	at org.springframework.mail.javamail.JavaMailSenderImpl.connectTransport(JavaMailSenderImpl.java:480)
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:399)
	... 15 common frames omitted
2025-06-25 20:15:03 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-06-25 20:15:03 [Thread-1] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:15:04 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:15:04 [Thread-1] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:15:04 [Thread-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:15:05 [Thread-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:15:05 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 24456 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:15:05 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:15:05 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:15:05 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:15:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:15:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 2 JPA repository interfaces.
2025-06-25 20:15:05 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:15:05 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:15:05 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:15:05 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:15:05 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 778 ms
2025-06-25 20:15:06 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:15:06 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:15:06 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:15:06 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:15:06 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@40087ed7
2025-06-25 20:15:06 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:15:06 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:15:06 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:15:06 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:15:07 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:15:07 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:15:07 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:15:07 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:15:08 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:15:08 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:15:08 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:15:08 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:15:08 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 3.339 seconds (process running for 158.255)
2025-06-25 20:15:08 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:15:08 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:15:08 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:15:08 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:15:08 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:15:08 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:15:08 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:15:08 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 20:15:20 [http-nio-8081-exec-1] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-25 20:15:20 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-25 20:15:20 [http-nio-8081-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-06-25 20:15:20 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:15:20 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:15:20 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:15:20 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:15:20 [http-nio-8081-exec-4] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:15:20 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:15:20 [http-nio-8081-exec-3] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:15:20 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:15:20 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:15:20 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:15:20 [http-nio-8081-exec-4] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:15:20 [http-nio-8081-exec-3] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:15:20 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:15:20 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:15:20 [http-nio-8081-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:15:20 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:15:20 [http-nio-8081-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:15:20 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:15:20 [http-nio-8081-exec-3] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:15:20 [http-nio-8081-exec-4] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:15:20 [http-nio-8081-exec-3] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:15:20 [http-nio-8081-exec-4] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:15:20 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:15:20 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:16:20 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /v1/auth/admin/create-user
2025-06-25 20:16:20 [http-nio-8081-exec-7] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:16:20 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:16:20 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:16:20 [http-nio-8081-exec-7] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:16:20 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /v1/auth/admin/create-user
2025-06-25 20:16:20 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.createUser(com.g47.cem.cemauthentication.dto.request.CreateUserRequest,org.springframework.security.core.Authentication,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:16:20 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.createUser(com.g47.cem.cemauthentication.dto.request.CreateUserRequest,org.springframework.security.core.Authentication,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:16:20 [http-nio-8081-exec-7] INFO  c.g.c.c.controller.AuthController - Create user request received by admin: admin@cem.local for email: jimoroh409@iridales.com
2025-06-25 20:16:20 [http-nio-8081-exec-7] INFO  c.g.c.c.s.UserManagementService - Creating user account by admin: admin@cem.local for email: jimoroh409@iridales.com
2025-06-25 20:16:20 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-06-25 20:16:20 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:16:21 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.User */insert 
    into
        users (created_at, created_by, email, email_verification_token, email_verified, first_name, last_login_at, last_name, locked_until, login_attempts, password, password_reset_expires_at, password_reset_token, phone, role_id, status, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-25 20:16:21 [http-nio-8081-exec-7] INFO  c.g.c.c.s.UserManagementService - User account created successfully by admin: admin@cem.local for email: jimoroh409@iridales.com
2025-06-25 20:16:21 [CEM-Async-1] INFO  c.g.c.c.service.UserEventListener - Handling UserCreatedEvent - sending account email to jimoroh409@iridales.com
2025-06-25 20:16:21 [CEM-Async-2] INFO  c.g.c.c.service.EmailService - Sending account creation email to: jimoroh409@iridales.com
2025-06-25 20:16:22 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:16:22 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:16:22 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:16:22 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:16:22 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:16:22 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:16:22 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:16:22 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:16:22 [http-nio-8081-exec-5] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:16:22 [http-nio-8081-exec-4] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:16:22 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:16:22 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:16:22 [http-nio-8081-exec-6] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:16:22 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:16:22 [http-nio-8081-exec-3] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:16:22 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:16:22 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:16:22 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:16:22 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:16:22 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:16:22 [http-nio-8081-exec-4] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:16:22 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:16:22 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:16:22 [http-nio-8081-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:16:22 [http-nio-8081-exec-4] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:16:22 [http-nio-8081-exec-4] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:16:22 [http-nio-8081-exec-4] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:16:22 [http-nio-8081-exec-6] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:16:22 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:16:22 [http-nio-8081-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:16:22 [http-nio-8081-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:16:22 [http-nio-8081-exec-6] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:16:22 [http-nio-8081-exec-6] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:16:22 [http-nio-8081-exec-3] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:16:22 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:16:22 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:16:22 [http-nio-8081-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:16:22 [http-nio-8081-exec-3] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:16:22 [http-nio-8081-exec-3] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:16:22 [http-nio-8081-exec-3] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:16:22 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:16:23 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:16:23 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:16:23 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:16:23 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:16:23 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:16:23 [http-nio-8081-exec-3] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:16:23 [http-nio-8081-exec-5] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:16:23 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:16:23 [http-nio-8081-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:16:23 [http-nio-8081-exec-5] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:16:23 [http-nio-8081-exec-5] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:16:23 [http-nio-8081-exec-5] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:16:23 [http-nio-8081-exec-5] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:16:26 [CEM-Async-2] INFO  c.g.c.c.service.EmailService - Account creation email sent successfully to: jimoroh409@iridales.com
2025-06-25 20:18:02 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-06-25 20:18:02 [Thread-5] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:18:03 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:18:03 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:18:03 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:18:03 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:18:03 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 24456 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:18:03 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:18:03 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:18:04 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:18:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:18:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 2 JPA repository interfaces.
2025-06-25 20:18:05 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:18:05 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:18:05 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:18:05 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:18:05 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1440 ms
2025-06-25 20:18:05 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:18:05 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:18:05 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:18:05 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:18:06 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@54f42fc3
2025-06-25 20:18:06 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:18:06 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:18:06 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:18:06 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:18:07 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:18:07 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:18:07 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:18:07 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:18:07 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:18:07 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:18:08 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:18:08 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:18:08 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 4.24 seconds (process running for 337.871)
2025-06-25 20:18:08 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:18:08 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:18:08 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:18:08 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:18:08 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:18:08 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:18:08 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:18:08 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 20:18:09 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 3 class path changes (0 additions, 0 deletions, 3 modifications)
2025-06-25 20:18:09 [Thread-9] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:18:10 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:18:10 [Thread-9] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:18:10 [Thread-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:18:10 [Thread-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:18:10 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 24456 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:18:10 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:18:10 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:18:11 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:18:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:18:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 2 JPA repository interfaces.
2025-06-25 20:18:11 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:18:11 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:18:11 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:18:11 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:18:11 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 822 ms
2025-06-25 20:18:11 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:18:11 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:18:11 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:18:11 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:18:12 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@3725ea69
2025-06-25 20:18:12 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:18:12 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:18:12 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:18:12 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:18:13 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:18:13 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:18:13 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:18:13 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:18:13 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:18:13 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:18:14 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:18:14 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:18:14 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 3.554 seconds (process running for 344.22)
2025-06-25 20:18:14 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:18:14 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:18:14 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:18:14 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:18:14 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:18:14 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:18:14 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:18:14 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 20:18:22 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-06-25 20:18:22 [Thread-13] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:18:24 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:18:24 [Thread-13] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:18:24 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:18:24 [Thread-13] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:18:24 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 24456 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:18:24 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:18:24 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:18:24 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:18:25 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:18:25 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 2 JPA repository interfaces.
2025-06-25 20:18:25 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:18:25 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:18:25 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:18:25 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:18:25 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 602 ms
2025-06-25 20:18:25 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:18:25 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:18:25 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:18:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:18:25 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@1031cdf1
2025-06-25 20:18:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:18:26 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:18:26 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:18:26 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:18:26 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:18:26 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:18:27 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:18:27 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:18:27 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:18:27 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:18:27 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:18:27 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:18:27 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 3.121 seconds (process running for 357.499)
2025-06-25 20:18:27 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:18:27 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:18:27 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:18:27 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:18:27 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:18:27 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:18:28 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:18:28 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 20:18:29 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-06-25 20:18:29 [Thread-17] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:18:30 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:18:30 [Thread-17] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:18:30 [Thread-17] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:18:30 [Thread-17] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:18:30 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 24456 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:18:30 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:18:30 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:18:30 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:18:31 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:18:31 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 2 JPA repository interfaces.
2025-06-25 20:18:31 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:18:31 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:18:31 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:18:31 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:18:31 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 706 ms
2025-06-25 20:18:31 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:18:31 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:18:31 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:18:31 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:18:32 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@127f0c0a
2025-06-25 20:18:32 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:18:32 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:18:32 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:18:32 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:18:33 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:18:33 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:18:33 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:18:33 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:18:34 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:18:34 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:18:34 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:18:34 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:18:34 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 4.335 seconds (process running for 364.81)
2025-06-25 20:18:35 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:18:35 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:18:35 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:18:35 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:18:35 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:18:35 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:18:35 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:18:35 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 20:19:21 [http-nio-8081-exec-3] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-25 20:19:21 [http-nio-8081-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-25 20:19:21 [http-nio-8081-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-06-25 20:19:21 [http-nio-8081-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:19:21 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:19:21 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:19:21 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:19:21 [http-nio-8081-exec-7] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:19:21 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:19:21 [http-nio-8081-exec-10] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:19:21 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:19:21 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:21 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:21 [http-nio-8081-exec-7] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:19:21 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:19:21 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:21 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:21 [http-nio-8081-exec-7] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:19:21 [http-nio-8081-exec-7] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:19:21 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:19:21 [http-nio-8081-exec-10] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:19:21 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:19:21 [http-nio-8081-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:21 [http-nio-8081-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:21 [http-nio-8081-exec-10] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:19:21 [http-nio-8081-exec-10] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:19:21 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:19:21 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:21 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:21 [http-nio-8081-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:30 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users/3/deactivate
2025-06-25 20:19:30 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /v1/auth/admin/users/3/deactivate
2025-06-25 20:19:30 [http-nio-8081-exec-2] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:19:30 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:19:30 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:30 [http-nio-8081-exec-2] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:19:30 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /v1/auth/admin/users/3/deactivate
2025-06-25 20:19:30 [http-nio-8081-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.deactivateUser(java.lang.Long,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:30 [http-nio-8081-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.deactivateUser(java.lang.Long,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:30 [http-nio-8081-exec-2] INFO  c.g.c.c.s.UserManagementService - Deactivating user with id 3
2025-06-25 20:19:30 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    join
        roles r1_0 
            on r1_0.id=u1_0.role_id 
    where
        u1_0.id=?
2025-06-25 20:19:30 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* update
        for com.g47.cem.cemauthentication.entity.User */update users 
    set
        created_by=?,
        email=?,
        email_verification_token=?,
        email_verified=?,
        first_name=?,
        last_login_at=?,
        last_name=?,
        locked_until=?,
        login_attempts=?,
        password=?,
        password_reset_expires_at=?,
        password_reset_token=?,
        phone=?,
        role_id=?,
        status=?,
        updated_at=? 
    where
        id=?
2025-06-25 20:19:30 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:19:30 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:19:30 [http-nio-8081-exec-9] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:19:30 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:19:30 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:30 [http-nio-8081-exec-9] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:19:30 [http-nio-8081-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:19:30 [http-nio-8081-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:30 [http-nio-8081-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:30 [http-nio-8081-exec-9] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:19:30 [http-nio-8081-exec-9] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:19:30 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:19:31 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:31 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:31 [http-nio-8081-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:36 [http-nio-8081-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users/2/deactivate
2025-06-25 20:19:36 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /v1/auth/admin/users/2/deactivate
2025-06-25 20:19:36 [http-nio-8081-exec-7] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:19:36 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:19:36 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:36 [http-nio-8081-exec-7] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:19:36 [http-nio-8081-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /v1/auth/admin/users/2/deactivate
2025-06-25 20:19:36 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.deactivateUser(java.lang.Long,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:36 [http-nio-8081-exec-7] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.deactivateUser(java.lang.Long,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:36 [http-nio-8081-exec-7] INFO  c.g.c.c.s.UserManagementService - Deactivating user with id 2
2025-06-25 20:19:36 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    join
        roles r1_0 
            on r1_0.id=u1_0.role_id 
    where
        u1_0.id=?
2025-06-25 20:19:37 [http-nio-8081-exec-7] DEBUG org.hibernate.SQL - 
    /* update
        for com.g47.cem.cemauthentication.entity.User */update users 
    set
        created_by=?,
        email=?,
        email_verification_token=?,
        email_verified=?,
        first_name=?,
        last_login_at=?,
        last_name=?,
        locked_until=?,
        login_attempts=?,
        password=?,
        password_reset_expires_at=?,
        password_reset_token=?,
        phone=?,
        role_id=?,
        status=?,
        updated_at=? 
    where
        id=?
2025-06-25 20:19:37 [http-nio-8081-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:19:37 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:19:37 [http-nio-8081-exec-1] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:19:37 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:19:37 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:37 [http-nio-8081-exec-1] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:19:37 [http-nio-8081-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:19:37 [http-nio-8081-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:37 [http-nio-8081-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:37 [http-nio-8081-exec-1] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:19:37 [http-nio-8081-exec-1] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:19:37 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:19:37 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:37 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:37 [http-nio-8081-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:40 [http-nio-8081-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/roles
2025-06-25 20:19:40 [http-nio-8081-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /v1/auth/admin/users?page=0&size=20
2025-06-25 20:19:40 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:19:40 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v1/auth/admin/roles
2025-06-25 20:19:40 [http-nio-8081-exec-6] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:19:40 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:19:40 [http-nio-8081-exec-2] DEBUG c.g.c.c.s.CustomUserDetailsService - Loading user by email: admin@cem.local
2025-06-25 20:19:40 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:19:40 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:40 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:40 [http-nio-8081-exec-6] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:19:40 [http-nio-8081-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/users?page=0&size=20
2025-06-25 20:19:40 [http-nio-8081-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:40 [http-nio-8081-exec-6] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getUsers(java.lang.String,java.lang.Long,com.g47.cem.cemauthentication.entity.AccountStatus,int,int,java.lang.String,java.lang.String,jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:40 [http-nio-8081-exec-6] INFO  c.g.c.c.controller.AuthController - Get users request received: search=null, roleId=null, status=null
2025-06-25 20:19:40 [http-nio-8081-exec-6] INFO  c.g.c.c.s.UserManagementService - Fetching users with filters search=, roleId=null, status=null page=0 size=20
2025-06-25 20:19:40 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    /* SELECT
        u 
    FROM
        User u 
    WHERE
        (
            :search IS NULL 
            OR LOWER(u.firstName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.lastName) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(CONCAT(u.firstName, ' ', u.lastName)) LIKE LOWER(CONCAT('%', :search, '%')) 
            OR LOWER(u.email) LIKE LOWER(CONCAT('%', :search, '%'))
        ) 
        AND (
            :roleId IS NULL 
            OR u.role.id = :roleId
        ) 
        AND (
            :status IS NULL 
            OR u.status = :status
        ) 
    order by
        u.createdAt desc */ select
            u1_0.id,
            u1_0.created_at,
            u1_0.created_by,
            u1_0.email,
            u1_0.email_verification_token,
            u1_0.email_verified,
            u1_0.first_name,
            u1_0.last_login_at,
            u1_0.last_name,
            u1_0.locked_until,
            u1_0.login_attempts,
            u1_0.password,
            u1_0.password_reset_expires_at,
            u1_0.password_reset_token,
            u1_0.phone,
            u1_0.role_id,
            u1_0.status,
            u1_0.updated_at 
        from
            users u1_0 
        where
            (
                ? is null 
                or lower(u1_0.first_name) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.last_name) like lower(('%'||?||'%')) escape '' 
                or lower((u1_0.first_name||' '||u1_0.last_name)) like lower(('%'||?||'%')) escape '' 
                or lower(u1_0.email) like lower(('%'||?||'%')) escape ''
            ) 
            and (
                ? is null 
                or u1_0.role_id=?
            ) 
            and (
                ? is null 
                or u1_0.status=?
            ) 
        order by
            u1_0.created_at desc 
        fetch
            first ? rows only
2025-06-25 20:19:40 [http-nio-8081-exec-2] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Successfully authenticated user: admin@cem.local
2025-06-25 20:19:40 [http-nio-8081-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v1/auth/admin/roles
2025-06-25 20:19:40 [http-nio-8081-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:40 [http-nio-8081-exec-2] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.g47.cem.cemauthentication.controller.AuthController.getAllRoles(jakarta.servlet.http.HttpServletRequest); target is of class [com.g47.cem.cemauthentication.controller.AuthController]
2025-06-25 20:19:40 [http-nio-8081-exec-2] INFO  c.g.c.c.controller.AuthController - Get all roles request received
2025-06-25 20:19:40 [http-nio-8081-exec-2] INFO  c.g.c.c.s.UserManagementService - Fetching all roles
2025-06-25 20:19:40 [http-nio-8081-exec-2] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0
2025-06-25 20:19:40 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:40 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:19:41 [http-nio-8081-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.id=?
2025-06-25 20:20:39 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-06-25 20:20:39 [Thread-21] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:20:40 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:20:40 [Thread-21] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:20:40 [Thread-21] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:20:40 [Thread-21] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:20:40 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 24456 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:20:40 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:20:40 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:20:41 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:20:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:20:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 2 JPA repository interfaces.
2025-06-25 20:20:41 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:20:41 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:20:41 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:20:41 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:20:41 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 416 ms
2025-06-25 20:20:41 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:20:41 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:20:41 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:20:41 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:20:42 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@223dce83
2025-06-25 20:20:42 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:20:42 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:20:42 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:20:42 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:20:42 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:20:43 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:20:43 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:20:43 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:20:43 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:20:43 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:20:43 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:20:43 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:20:43 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 2.728 seconds (process running for 493.513)
2025-06-25 20:20:44 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles (only if table is empty)
2025-06-25 20:20:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* select
        count(*) 
    from
        Role x */ select
            count(*) 
        from
            roles r1_0
2025-06-25 20:20:44 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Roles already present -> seeding skipped
2025-06-25 20:20:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:20:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:20:44 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id,
        u1_0.created_at,
        u1_0.created_by,
        u1_0.email,
        u1_0.email_verification_token,
        u1_0.email_verified,
        u1_0.first_name,
        u1_0.last_login_at,
        u1_0.last_name,
        u1_0.locked_until,
        u1_0.login_attempts,
        u1_0.password,
        u1_0.password_reset_expires_at,
        u1_0.password_reset_token,
        u1_0.phone,
        u1_0.role_id,
        u1_0.status,
        u1_0.updated_at 
    from
        users u1_0 
    where
        u1_0.email=?
2025-06-25 20:20:44 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default admin account already exists  leaving role/password unchanged
2025-06-25 20:20:44 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-06-25 20:22:20 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 8 class path changes (0 additions, 2 deletions, 6 modifications)
2025-06-25 20:22:20 [Thread-25] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-06-25 20:22:22 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-06-25 20:22:22 [Thread-25] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:22:22 [Thread-25] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown initiated...
2025-06-25 20:22:22 [Thread-25] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Shutdown completed.
2025-06-25 20:22:22 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Starting CemAuthenticationApplication using Java 17.0.11 with PID 24456 (D:\do-an\Viet\CEM-backend\CEM-authentication\target\classes started by Lom in D:\do-an\Viet\CEM-backend\CEM-authentication)
2025-06-25 20:22:22 [restartedMain] DEBUG c.g.c.c.CemAuthenticationApplication - Running with Spring Boot v3.5.0, Spring v6.2.7
2025-06-25 20:22:22 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - No active profile set, falling back to 1 default profile: "default"
2025-06-25 20:22:23 [restartedMain] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'passwordEncoder' with a different definition: replacing [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=applicationConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/ApplicationConfig.class]] with [Root bean: class=null; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; fallback=false; factoryBeanName=securityConfig; factoryMethodName=passwordEncoder; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in class path resource [com/g47/cem/cemauthentication/config/SecurityConfig.class]]
2025-06-25 20:22:23 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-25 20:22:23 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 8 ms. Found 2 JPA repository interfaces.
2025-06-25 20:22:23 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8081 (http)
2025-06-25 20:22:23 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-25 20:22:23 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.41]
2025-06-25 20:22:23 [restartedMain] INFO  o.a.c.c.C.[.[localhost].[/api/auth] - Initializing Spring embedded WebApplicationContext
2025-06-25 20:22:23 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 660 ms
2025-06-25 20:22:23 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-25 20:22:23 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-25 20:22:23 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-25 20:22:23 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Starting...
2025-06-25 20:22:24 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-AUTH - Added connection org.postgresql.jdbc.PgConnection@7b0dcc3f
2025-06-25 20:22:24 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-AUTH - Start completed.
2025-06-25 20:22:24 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-25 20:22:24 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-AUTH)']
	Database driver: undefined/unknown
	Database version: 16.9
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-06-25 20:22:24 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-25 20:22:24 [restartedMain] DEBUG org.hibernate.SQL - 
    set client_min_messages = WARNING
2025-06-25 20:22:24 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists FKp56c1712k691lhsyewcssf40f
2025-06-25 20:22:24 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists roles cascade
2025-06-25 20:22:24 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-06-25 20:22:24 [restartedMain] DEBUG org.hibernate.SQL - 
    create table roles (
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        updated_at timestamp(6),
        name varchar(50) not null unique,
        description varchar(255),
        primary key (id)
    )
2025-06-25 20:22:24 [restartedMain] DEBUG org.hibernate.SQL - 
    create table users (
        email_verified boolean,
        login_attempts integer,
        created_at timestamp(6) not null,
        id bigint generated by default as identity,
        last_login_at timestamp(6),
        locked_until timestamp(6),
        password_reset_expires_at timestamp(6),
        role_id bigint not null,
        updated_at timestamp(6),
        phone varchar(15),
        first_name varchar(100) not null,
        last_name varchar(100) not null,
        created_by varchar(255),
        email varchar(255) not null unique,
        email_verification_token varchar(255),
        password varchar(255) not null,
        password_reset_token varchar(255),
        status varchar(255) not null check (status in ('ACTIVE','INACTIVE','SUSPENDED','PENDING_VERIFICATION','DELETED')),
        primary key (id)
    )
2025-06-25 20:22:24 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint FKp56c1712k691lhsyewcssf40f 
       foreign key (role_id) 
       references roles
2025-06-25 20:22:24 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-25 20:22:24 [restartedMain] DEBUG c.g.c.c.c.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-06-25 20:22:24 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-06-25 20:22:24 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-06-25 20:22:25 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoints beneath base path '/actuator'
2025-06-25 20:22:25 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-06-25 20:22:25 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-06-25 20:22:25 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8081 (http) with context path '/api/auth'
2025-06-25 20:22:25 [restartedMain] INFO  c.g.c.c.CemAuthenticationApplication - Started CemAuthenticationApplication in 2.873 seconds (process running for 595.412)
2025-06-25 20:22:25 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default roles
2025-06-25 20:22:25 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 20:22:25 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 20:22:25 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default ADMINISTRATOR role
2025-06-25 20:22:25 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 20:22:25 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 20:22:25 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default STAFF role
2025-06-25 20:22:25 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 20:22:25 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 20:22:25 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default MANAGER role
2025-06-25 20:22:25 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 20:22:26 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 20:22:26 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default CUSTOMER role
2025-06-25 20:22:26 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id 
    from
        roles r1_0 
    where
        r1_0.name=? 
    fetch
        first ? rows only
2025-06-25 20:22:26 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.Role */insert 
    into
        roles (created_at, description, name, updated_at) 
    values
        (?, ?, ?, ?)
2025-06-25 20:22:26 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Created default SUPPORT_TEAM role
2025-06-25 20:22:26 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Initializing default administrator account
2025-06-25 20:22:26 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.email=? 
    fetch
        first ? rows only
2025-06-25 20:22:26 [restartedMain] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        r1_0.id,
        r1_0.created_at,
        r1_0.description,
        r1_0.name,
        r1_0.updated_at 
    from
        roles r1_0 
    where
        r1_0.name=?
2025-06-25 20:22:26 [restartedMain] DEBUG org.hibernate.SQL - 
    /* insert for
        com.g47.cem.cemauthentication.entity.User */insert 
    into
        users (created_at, created_by, email, email_verification_token, email_verified, first_name, last_login_at, last_name, locked_until, login_attempts, password, password_reset_expires_at, password_reset_token, phone, role_id, status, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-25 20:22:26 [restartedMain] INFO  c.g.c.c.s.UserManagementService - Default administrator account created successfully: admin@cem.com
2025-06-25 20:22:26 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
